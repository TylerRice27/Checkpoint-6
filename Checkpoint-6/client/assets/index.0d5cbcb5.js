import{r as G,c as E,a as b,o as d,b as u,d as n,e as g,w as k,F as Q,f as x,S as N,g as J,h as P,i as p,v as f,j as L,u as O,t as y,k as X,p as C,l as A,m as Z,n as ee,q as te,s as oe,x as ne,y as $,z as R,A as ae,B as se,C as re,M as ce,D as ie,E as le}from"./vendor.8af76252.js";const de=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(r){if(r.ep)return;r.ep=!0;const c=t(r);fetch(r.href,c)}};de();const i=G({user:{},account:{},accountTickets:[],events:[],activeEvent:{},comments:[],tickets:[],eventTickets:[]});var h=(a,e)=>{for(const[t,o]of e)a[t]=o;return a};const ue={name:"App",setup(){return{appState:E(()=>i)}}},_e=x("Create a Event"),me=x("Edit Your Account"),ve=n("footer",null,null,-1);function pe(a,e,t,o,r,c){const s=b("Navbar"),v=b("router-view"),T=b("TowerEventForm"),M=b("Modal"),W=b("AccountForm");return d(),u(Q,null,[n("header",null,[g(s)]),n("main",null,[g(v),g(M,{id:"create-towerEvent"},{header:k(()=>[_e]),body:k(()=>[g(T)]),_:1}),g(M,{id:"editAccount-form"},{header:k(()=>[me]),body:k(()=>[g(W)]),_:1})]),ve],64)}var ge=h(ue,[["render",pe]]);const U=window.location.origin.includes("localhost"),V=U?"http://localhost:3000":"",he="dev-ukxg-q38.us.auth0.com",be="OrNg1n6swOJ7RGMg8DMDMQMPRnqipYnu",fe="https://TylerDev.com";function S(a,e){if(U)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const l={log(){S("log",arguments)},error(){S("error",arguments)},warn(){S("warn",arguments)},assert(){S("assert",arguments)},trace(){S("trace",arguments)}};class w{static async confirm(e="Are you sure?",t="You won't be able to revert this!",o="warning",r="Yes, delete it!"){try{return!!(await N.fire({title:e,text:t,icon:o,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",o="top-end",r=3e3,c=!0){N.fire({title:e,icon:t,position:o,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}static error(e){var t;if(e.isAxiosError){const{response:o}=e;this.toast(((t=o.data.error)==null?void 0:t.message)||o.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}const _=J.create({baseURL:V,timeout:8e3});class ye{async getAccount(){try{const e=await _.get("/account");i.account=e.data}catch(e){l.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async editAccount(e){const t=await _.put("/account",e);l.log(t.data),i.account=t.data}async getMyTickets(){const e=await _.get("account/tickets");l.log("My event tickets",e.data),i.accountTickets=e.data}}const j=new ye,we={setup(){const a=P({});return{editable:a,async editAccount(){try{await j.editAccount(a.value)}catch(e){l.error(e),w.toast(e.message,"error")}}}}},Ee={class:"mb-3"},ke=n("label",null,"Account Name",-1),Te={class:"mb-3"},$e=n("label",null,"Account Image",-1),Se=n("button",{class:"btn btn-primary"},"Save Changes!",-1);function xe(a,e,t,o,r,c){return d(),u("form",{class:"m-2",onSubmit:e[2]||(e[2]=L((...s)=>o.editAccount&&o.editAccount(...s),["prevent"])),id:"editAccount-form"},[n("div",Ee,[ke,p(n("input",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>o.editable.name=s),type:"text",required:""},null,512),[[f,o.editable.name]])]),n("div",Te,[$e,p(n("input",{class:"form-control","onUpdate:modelValue":e[1]||(e[1]=s=>o.editable.img=s),type:"text",required:""},null,512),[[f,o.editable.img]])]),Se],32)}var Ce=h(we,[["render",xe]]),Ae=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ce});class De{async createComment(e){const t=await _.post("api/comments",e);l.log("create comment",t.data),i.comments.push(t.data)}async getComments(e){const t=await _.get(`api/events/${e}/comments`);l.log("get all my comments",t.data),i.comments=t.data}async removeComment(e){const t=await _.delete(`api/comments/${e}`);l.log(t.data),i.comments=i.comments.filter(o=>o.id!=e)}}const Oe=new De;const Ie={props:{comment:{type:Object,required:!0}},setup(a){return O(),{account:E(()=>i.account),async removeComment(){try{await w.confirm("Do you want to Delete?")&&await Oe.removeComment(a.comment.id)}catch(e){w.toast(e.message,"error"),l.error(e)}}}}},qe=a=>(C("data-v-0a0d8f68"),a=a(),A(),a),Me={class:"card row elevation-2 bg-dark text-white m-3 p-2"},Ne={class:"d-flex"},Pe=["src"],Le={class:"col-md-12 d-flex"},Re={class:"bord bg-white p-2 text-black"},Ue={class:"d-flex justify-content-end"},Ve=qe(()=>n("i",{class:"mdi mdi-delete-forever"},"Delete",-1)),je=[Ve];function ze(a,e,t,o,r,c){return d(),u("div",Me,[n("h2",Ne,[n("img",{class:"profile-img rounded-pill ms-2 selectable me-2",src:t.comment.creator.picture,alt:"User profile pic"},null,8,Pe),x(" "+y(t.comment.creator.name),1)]),n("div",Le,[n("h4",Re,y(t.comment.body),1)]),n("div",Ue,[p(n("button",{type:"button",class:"me-2 delete-button col-md-1 btn trash btn-danger rounded-pill selectable",onClick:e[0]||(e[0]=(...s)=>o.removeComment&&o.removeComment(...s))},je,512),[[X,t.comment.creatorId==o.account.id]])])])}var Be=h(Ie,[["render",ze],["__scopeId","data-v-0a0d8f68"]]),He=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Be});const Fe="modulepreload",z={},Ye="/",I=function(e,t){return!t||t.length===0?e():Promise.all(t.map(o=>{if(o=`${Ye}${o}`,o in z)return;z[o]=!0;const r=o.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${c}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":Fe,r||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),r)return new Promise((v,T)=>{s.addEventListener("load",v),s.addEventListener("error",T)})})).then(()=>e())};function Ke(a){switch(a){case"./pages/AccountPage.vue":return I(()=>import("./AccountPage.e8563352.js"),["assets/AccountPage.e8563352.js","assets/AccountPage.55731a78.css","assets/vendor.8af76252.js"]);case"./pages/EventPage.vue":return I(()=>import("./EventPage.62515544.js"),["assets/EventPage.62515544.js","assets/EventPage.6f2aae01.css","assets/vendor.8af76252.js"]);case"./pages/HomePage.vue":return I(()=>import("./HomePage.85b85ab1.js"),["assets/HomePage.85b85ab1.js","assets/vendor.8af76252.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function q(a){return()=>Ke(`./pages/${a}.vue`)}const We=[{path:"/",name:"Home",component:q("HomePage")},{path:"/event/:id",name:"EventDetails",component:q("EventPage"),beforeEnter:te},{path:"/account",name:"Account",component:q("AccountPage"),beforeEnter:oe}],B=Z({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:ee(),routes:We}),Ge={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class Qe{constructor(e=!1,t=V){}on(e,t){var o;return(o=this.socket)==null||o.on(e,t.bind(this)),this}onConnected(e){l.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){l.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(Ge.authenticate,e)}onError(e){l.error("[SOCKET_ERROR]",e)}enqueue(e,t){l.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){l.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class Je extends Qe{constructor(){super();this.on("error",this.onError)}onError(e){w.toast(e.message,"error")}}const H=new Je,m=ne({domain:he,clientId:be,audience:fe,useRefreshTokens:!0,onRedirectCallback:a=>{B.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});m.on(m.AUTH_EVENTS.AUTHENTICATED,async function(){_.defaults.headers.authorization=m.bearer,_.interceptors.request.use(Xe),i.user=m.user,await j.getAccount(),H.authenticate(m.bearer)});async function Xe(a){if(!m.isAuthenticated)return a;const e=m.identity.exp*1e3,t=e<Date.now(),o=e<Date.now()+1e3*60*60*12;return t?await m.loginWithPopup():o&&(await m.getTokenSilently(),_.defaults.headers.authorization=m.bearer,H.authenticate(m.bearer)),a}const Ze={setup(){return{user:E(()=>i.user),account:E(()=>i.account),async login(){m.loginWithPopup()},async logout(){m.logout({returnTo:window.location.origin})}}}},F=a=>(C("data-v-3cdc710e"),a=a(),A(),a),et={class:"navbar-text"},tt={key:1,class:"dropdown my-2 my-lg-0"},ot={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},nt={key:0},at=["src"],st={class:"mx-3 text-warning lighten-10"},rt={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},ct=F(()=>n("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),it=F(()=>n("i",{class:"mdi mdi-logout"},null,-1)),lt=x(" logout "),dt=[it,lt];function ut(a,e,t,o,r,c){const s=b("router-link");return d(),u("span",et,[o.user.isAuthenticated?(d(),u("div",tt,[n("div",ot,[o.account.picture?(d(),u("div",nt,[n("img",{src:o.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,at),n("span",st,y(o.account.name),1)])):$("",!0)]),n("div",rt,[g(s,{to:{name:"Account"}},{default:k(()=>[ct]),_:1}),n("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...v)=>o.logout&&o.logout(...v))},dt)])])):(d(),u("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...v)=>o.login&&o.login(...v))}," Login "))])}var _t=h(Ze,[["render",ut],["__scopeId","data-v-3cdc710e"]]),mt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:_t});const vt={},pt={class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},gt={class:"modal-dialog modal-lg",role:"document"},ht={class:"modal-content"},bt={class:"modal-header"},ft=n("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1);function yt(a,e,t,o,r,c){return d(),u("div",pt,[n("div",gt,[n("div",ht,[n("div",bt,[R(a.$slots,"header",{class:"modal-title"}),ft]),R(a.$slots,"body",{class:"modal-body"})])])])}var wt=h(vt,[["render",yt]]),Et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wt});const kt={setup(){return{account:E(()=>i.account)}}},D=a=>(C("data-v-7a5e0e8a"),a=a(),A(),a),Tt={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},$t=D(()=>n("div",{class:"d-flex flex-column align-items-center"},[n("img",{class:"logo",alt:"logo",src:"https://static.vecteezy.com/system/resources/thumbnails/000/547/255/small/real-39.jpg",height:"45"})],-1)),St=D(()=>n("h4",{class:"p-2"},"Tower Event Center",-1)),xt=D(()=>n("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[n("span",{class:"navbar-toggler-icon"})],-1)),Ct={class:"collapse navbar-collapse",id:"navbarText"},At=D(()=>n("ul",{class:"navbar-nav me-auto"},[n("li")],-1)),Dt={class:"create-event"};function Ot(a,e,t,o,r,c){const s=b("router-link"),v=b("Login");return d(),u("nav",Tt,[g(s,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:k(()=>[$t,St]),_:1}),xt,n("div",Ct,[At,n("div",Dt,[o.account.id?(d(),u("button",{key:0,class:"btn btn-light","data-bs-toggle":"modal","data-bs-target":"#create-towerEvent",onClick:e[0]||(e[0]=(...T)=>a.createTowerEvent&&a.createTowerEvent(...T))}," New Event! ")):$("",!0)]),g(v)])])}var It=h(kt,[["render",Ot],["__scopeId","data-v-7a5e0e8a"]]),qt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:It});class Mt{async getTicketsByEvent(e){const t=await _.get(`api/events/${e}/tickets`);i.tickets=t.data}async createTicket(e){const t=await _.post("/api/tickets",e);i.tickets.push(t.data),i.eventTickets.push(t.data)}async deleteTicket(e){await _.delete("api/tickets/"+e),i.accountTickets=i.accountTickets.filter(t=>t.id!=e)}}const Nt=new Mt;const Pt={props:{ticket:{type:Object,required:!0}},setup(a){const e=ae();return se(async()=>{try{await Nt.getTicketsByEvent(e.params.id)}catch(t){w.error(t)}}),{tickets:E(()=>i.tickets)}}},Lt={class:"tickets"},Rt=["title","src"];function Ut(a,e,t,o,r,c){var s,v;return d(),u("div",Lt,[n("div",null,[n("img",{class:"hv rounded-pill",title:(s=t.ticket.account)==null?void 0:s.name,src:(v=t.ticket.account)==null?void 0:v.picture,alt:""},null,8,Rt)])])}var Vt=h(Pt,[["render",Ut],["__scopeId","data-v-74a6159e"]]),jt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Vt});const zt={props:{towerEvent:{type:Object,required:!0}},setup(a){const e=O();return{selectTowerEvent(){e.push({name:"EventDetails",params:{id:a.towerEvent.id}})},formatDate(t){return` ${new Date(t).toDateString()}`}}}},Y=a=>(C("data-v-650c54fe"),a=a(),A(),a),Bt={class:"text-block"},Ht={key:0},Ft={class:"text-end"},Yt={key:1,class:"bg-danger rounded"},Kt=Y(()=>n("h6",null,"Sold Out!",-1)),Wt=[Kt],Gt={key:2,class:"bg-danger rounded"},Qt=Y(()=>n("h6",null,"Cancelled!",-1)),Jt=[Qt];function Xt(a,e,t,o,r,c){return d(),u("div",{class:"event-card card m-1",onClick:e[0]||(e[0]=(...s)=>o.selectTowerEvent&&o.selectTowerEvent(...s)),style:re(`background-image: url(${t.towerEvent.coverImg});`)},[n("div",Bt,[n("h5",null,y(t.towerEvent.name),1),n("p",null,y(t.towerEvent.location),1),t.towerEvent.startDate?(d(),u("p",Ht,y(o.formatDate(t.towerEvent.startDate)),1)):$("",!0),n("p",null,y(t.towerEvent.type),1),n("div",Ft,[n("p",null,y(t.towerEvent.capacity),1)]),t.towerEvent.capacity==0?(d(),u("div",Yt,Wt)):$("",!0),t.towerEvent.isCanceled==!0?(d(),u("div",Gt,Jt)):$("",!0)])],4)}var Zt=h(zt,[["render",Xt],["__scopeId","data-v-650c54fe"]]),eo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Zt});class to{async createTowerEvent(e){const t=await _.post("api/events",e);return l.log("created Event",t.data),i.events.push(t.data),t.data}async getEvents(e=""){const t=await _.get("api/events"+e);l.log("get my events",t.data),i.events=t.data}async getEvent(e){const t=await _.get("api/events/"+e);l.log("get this event",t.data),i.activeEvent=t.data}async cancelEvent(e){const t=await _.delete("api/events/"+e);l.log("cancel this event",t.data)}}const oo=new to,no={setup(){const a=P({}),e=O();return{editable:a,async createTowerEvent(){try{const t=await oo.createTowerEvent(a.value);ce.getOrCreateInstance(document.getElementById("create-towerEvent")).hide(),e.push({name:"EventDetails",params:{id:t.id}}),w.toast("Event Created!")}catch(t){w.error(t)}}}}},ao={class:"mb-3"},so=n("label",null,"Event Name",-1),ro={class:"mb-3"},co=n("label",null,"Event Description",-1),io={class:"mb-3"},lo=n("label",null,"Cover Image",-1),uo={class:"mb-3"},_o=n("label",null,"Location",-1),mo={class:"mb-3"},vo=n("label",null,"Capacity",-1),po={class:"mb-3"},go=n("label",null,"Date",-1),ho={class:"mb-3"},bo=n("label",null,"Type",-1),fo=n("option",{value:"concert"},"Concert",-1),yo=n("option",{value:"convention"},"Convention",-1),wo=n("option",{value:"sport"},"Sport",-1),Eo=n("option",{value:"digital"},"Digital",-1),ko=[fo,yo,wo,Eo],To=n("button",{class:"btn btn-primary m-1"},"Create Event!",-1);function $o(a,e,t,o,r,c){return d(),u("form",{class:"m-2",onSubmit:e[7]||(e[7]=L((...s)=>o.createTowerEvent&&o.createTowerEvent(...s),["prevent"])),id:"towerEvent-form"},[n("div",ao,[so,p(n("input",{class:"form-control","onUpdate:modelValue":e[0]||(e[0]=s=>o.editable.name=s),type:"text",required:""},null,512),[[f,o.editable.name]])]),n("div",ro,[co,p(n("input",{class:"form-control","onUpdate:modelValue":e[1]||(e[1]=s=>o.editable.description=s),type:"text",required:""},null,512),[[f,o.editable.description]])]),n("div",io,[lo,p(n("input",{class:"form-control","onUpdate:modelValue":e[2]||(e[2]=s=>o.editable.coverImg=s),type:"text",required:""},null,512),[[f,o.editable.coverImg]])]),n("div",uo,[_o,p(n("input",{class:"form-control","onUpdate:modelValue":e[3]||(e[3]=s=>o.editable.location=s),type:"text",required:""},null,512),[[f,o.editable.location]])]),n("div",mo,[vo,p(n("input",{class:"form-control","onUpdate:modelValue":e[4]||(e[4]=s=>o.editable.capacity=s),type:"number",required:""},null,512),[[f,o.editable.capacity]])]),n("div",po,[go,p(n("input",{class:"form-control","onUpdate:modelValue":e[5]||(e[5]=s=>o.editable.startDate=s),type:"date",required:""},null,512),[[f,o.editable.startDate]])]),n("div",ho,[bo,p(n("select",{class:"form-control","onUpdate:modelValue":e[6]||(e[6]=s=>o.editable.type=s),required:""},ko,512),[[ie,o.editable.type]])]),To],32)}var So=h(no,[["render",$o]]),xo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:So});function Co(a){Object.entries({"./components/AccountForm.vue":Ae,"./components/Comment.vue":He,"./components/Login.vue":mt,"./components/Modal.vue":Et,"./components/Navbar.vue":qt,"./components/Ticket.vue":jt,"./components/TowerEvent.vue":eo,"./components/TowerEventForm.vue":xo}).forEach(([t,o])=>{const r=o.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(r,o.default)})}const K=le(ge);Co(K);K.use(B).mount("#app");export{i as A,w as P,h as _,j as a,oo as b,Oe as c,l,Nt as t};
